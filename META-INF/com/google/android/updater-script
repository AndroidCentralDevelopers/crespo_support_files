assert(!less_than_int(1324365991, getprop("ro.build.date.utc")));
assert(getprop("ro.product.device") == "crespo" ||
       getprop("ro.build.product") == "crespo");
show_progress(0.500000, 0);
format("ext4", "EMMC", "/dev/block/platform/s3c-sdhci.0/by-name/system", "0");
mount("ext4", "EMMC", "/dev/block/platform/s3c-sdhci.0/by-name/system", "/system");
package_extract_dir("system", "/system");
symlink("Roboto-Bold.ttf", "/system/fonts/DroidSans-Bold.ttf");
symlink("Roboto-Regular.ttf", "/system/fonts/DroidSans.ttf");
ui_print(" Busybox setup");
set_perm(0, 1000, 0755, "/system/xbin/busybox");
package_extract_file("installbusybox", "/tmp/installbusybox");
set_perm(0, 0, 0777, "/tmp/installbusybox");
run_program("/tmp/installbusybox");
symlink("mksh", "/system/bin/sh");
symlink("toolbox", "/system/bin/cat", "/system/bin/chmod",
        "/system/bin/chown", "/system/bin/cmp", "/system/bin/date",
        "/system/bin/dd", "/system/bin/df", "/system/bin/dmesg",
        "/system/bin/getevent", "/system/bin/getprop", "/system/bin/hd",
        "/system/bin/id", "/system/bin/ifconfig", "/system/bin/iftop",
        "/system/bin/insmod", "/system/bin/ioctl", "/system/bin/ionice",
        "/system/bin/kill", "/system/bin/ln", "/system/bin/log",
        "/system/bin/ls", "/system/bin/lsmod", "/system/bin/lsof",
        "/system/bin/mkdir", "/system/bin/mount", "/system/bin/mv",
        "/system/bin/nandread", "/system/bin/netstat",
        "/system/bin/newfs_msdos", "/system/bin/notify", "/system/bin/printenv",
        "/system/bin/ps", "/system/bin/r", "/system/bin/reboot",
        "/system/bin/renice", "/system/bin/rm", "/system/bin/rmdir",
        "/system/bin/rmmod", "/system/bin/route", "/system/bin/schedtop",
        "/system/bin/sendevent", "/system/bin/setconsole",
        "/system/bin/setprop", "/system/bin/sleep", "/system/bin/smd",
        "/system/bin/start", "/system/bin/stop", "/system/bin/sync",
        "/system/bin/top", "/system/bin/touch", "/system/bin/umount",
        "/system/bin/uptime", "/system/bin/vmstat", "/system/bin/watchprops",
        "/system/bin/wipe");
retouch_binaries("/system/lib/libstagefright_soft_mp3dec.so", "5843747bc9dc4e7b685cde300f59d23d100b2eab", "/system/lib/libETC1.so", "506a9d7ff6776fc404298137732faf3896809173", "/system/lib/libext2_com_err.so", "c2b169cd15c5593b80f49a4b509e4e1b2d08d734", "/system/lib/libnetutils.so", "0ee9171bba267f734075e7e4ff64a38ef72204ae", "/system/lib/libbluedroid.so", "89d75a00d75cf847d98f9639f1ce59269b08ccfb", "/system/lib/bluez-plugin/network.so", "58ac398ba4640485e4d7d2289ef8224d3e9efb79", "/system/lib/bluez-plugin/audio.so", "7235f4198597db9727adc91a94d84601618b8b33", "/system/lib/bluez-plugin/bluetooth-health.so", "faeb3ba9c411422f0564c3b96a0f694349108317", "/system/lib/bluez-plugin/input.so", "cc7356fd58ccf27dd164154e746d465e43302109", "/system/lib/libz.so", "84f4fb971f25a0a6f1e1fcdb2f17860878c21f2e", "/system/lib/libjnigraphics.so", "59e181a47d400e4363909c1a8042e72f9f1bf60a", "/system/lib/libbcc.so.sha1", "1769aa85d90cb15106858bcbd7786eeef01135c7", "/system/lib/libsystem_server.so", "d3ea691bdfd3efd40d54279b21504e78381b6366", "/system/lib/libstagefright_amrnb_common.so", "3562b6eff3ff830602f97e332d79d24da9abd4ce", "/system/lib/libandroid.so", "ab9e0608bb693830f14c6f74ec2c8c6117df8f88", "/system/lib/libcameraservice.so", "c81797c9e580af1224db4f4da0e34126efd12c32", "/system/lib/libOMX.SEC.AVC.Decoder.so", "4356522aef881cc6b490f4b995295b9bd00ce25f", "/system/lib/libcrypto.so", "7c81324fa9d245ecf8bc0fe2f30a5171f0f20133", "/system/lib/libdl.so", "55d3a31d415816b9098cda6b6fbb06b6dbf2034c", "/system/lib/libvorbisidec.so", "eda2b8b0e2a4c3d8543d4841d4938907af368e25", "/system/lib/libui.so", "e7c72b6c16fda6318ead9d51bdc1fbe1bf24703d", "/system/lib/libttscompat.so", "39fbc87c5fcba7474f1e14382c118c5c053cbb86", "/system/lib/libpower.so", "250072ec47509a0d1a3c7ebab157ffd3681d155f", "/system/lib/libm.so", "072c72c8f4f765d0f7a28293719b783edf5278e8", "/system/lib/libGLESv1_CM.so", "7838342c544952af5f085de3feccd5ddac518808", "/system/lib/libsqlite.so", "791f6f320099180eb5d6f17303917902455edc78", "/system/lib/libstagefright_soft_g711dec.so", "688c443db699657a57af4e8f92e5296e455cf5dd", "/system/lib/libglib.so", "cfbc07063c2f84eba21f486811c8aa21129ba0ed", "/system/lib/libstagefright_avc_common.so", "4808c10ae9f1d16bbb205808d36cf76914638297", "/system/lib/libwnndict.so", "6088c978806a7b0285b85a15e2c3b8661a66a156", "/system/lib/libsrec_jni.so", "e932ef79917b769ae2f06ab429606d4e9ff89c66", "/system/lib/libstagefright.so", "ef714547cb8d9fdb147cdba8b82c905bc4abe7e6", "/system/lib/libEGL.so", "7ce53f8698ec18e8d59e9df4e7a08a7d19e6bc90", "/system/lib/libOMX.SEC.M4V.Encoder.so", "5ebbaf43de896137e4518ecb74bd0f868a73b5e9", "/system/lib/libthread_db.so", "1442e349355e707f3cff78d174a014dff9fe42de", "/system/lib/libSEC_OMX_Core.so", "25fd8432603ad68f1b49a85980045dcafd322ca5", "/system/lib/libbluetooth.so", "0aeda3aad3df7e47575a85a759495717a6bc8f79", "/system/lib/libreference-ril.so", "d5c4b4dd2811d1e8bb5b7e54e598855afa7394c5", "/system/lib/libOpenSLES.so", "30f45483858ecf2d9fefd4f878280663df3ba981", "/system/lib/libRS.so", "31ecf2453e20625fc6ff90d644ed8c285843b9c7", "/system/lib/libaudioeffect_jni.so", "186b790acbc90e0378f09f6871870a3227fa7b3a", "/system/lib/soundfx/libbundlewrapper.so", "2c486a9e2317f46af0e47c6e5c2846295e89076d", "/system/lib/soundfx/libvisualizer.so", "db019fe537c8623724d9fdccbc8bef345fd8cc1b", "/system/lib/soundfx/libaudiopreprocessing.so", "9a155695c1a76558710167acba64b22ea1a3de49", "/system/lib/soundfx/libreverbwrapper.so", "58d69fef5154750ee32c6783a7ccd1e025f8df2f", "/system/lib/libsoundpool.so", "7b8a9e795ac6000fbe168e2ac1585e412bcb936a", "/system/lib/libstagefright_enc_common.so", "9c03995230bd75f8eecbddf96753aa0ff42b8491", "/system/lib/libgabi++.so", "150c8f6e020277164f965154828a28d9d2e375c3", "/system/lib/libusbhost.so", "eedf3d80bb6672a8cc68e2ecfc84e381835967a5", "/system/lib/libtinyalsa.so", "bf0c1109b566136bc3c72f77b6ffb9d3a3e018db", "/system/lib/libdrm1.so", "20a3e7e6bf5aa4e3604dcc7b72b5692144c254d2", "/system/lib/libmtp.so", "6c075865661d7854aefee4d7e73e22762b3a9d32", "/system/lib/hw/camera.herring.so", "5175e80db29032cd6f414dd58e9f30ddba735d20", "/system/lib/hw/audio.a2dp.default.so", "f800ba5f5daa1e581016415426ffa7919b0b799c", "/system/lib/hw/hwcomposer.s5pc110.so", "58c0898324a89414bfb5e5ac1a2c861c95bb4351", "/system/lib/hw/lights.s5pc110.so", "9b0cd1852745edd3fa7cc4767c2e168ac589cb53", "/system/lib/hw/camera.goldfish.so", "1ce2e24cc283d48ec62fc840231603922ad9e902", "/system/lib/hw/audio.primary.herring.so", "86a0756577f70c569292cce76b730d0fc1c3c7f6", "/system/lib/hw/nfc.herring.so", "69087db118f368149f47ec60f8210b72f064404e", "/system/lib/hw/sensors.herring.so", "d1d413d6bdcf64feb705b6a3d32afa9ce5b76a81", "/system/lib/hw/gps.goldfish.so", "c2f0f31b9f4586fa3c60187a625a1a3fb593fec4", "/system/lib/hw/audio_policy.default.so", "cc750d7469f207fb35d4d139b040ba70c4cb16d4", "/system/lib/hw/sensors.goldfish.so", "04cd8e55e1ed3aca4e80126c982a0e4be24a5e4c", "/system/lib/hw/lights.goldfish.so", "8ee44b8aa8da876fa076ff343925d3addeb0e7bc", "/system/lib/hw/gralloc.default.so", "03d4f47dce8120383b69a9b1f9327ff6e7e5193b", "/system/lib/hw/audio_policy.herring.so", "7dbdd2aaaa17852e1a3193ac46bb591c2e31329e", "/system/lib/hw/audio.primary.default.so", "77f2fefa7721c59b59ef6963a11745f356964736", "/system/lib/libexpat.so", "34b82b422bd97f604f50bdefbcf9be914b730f4c", "/system/lib/libdrmframework_jni.so", "bfa1390a2599639052bebd7c1b1f4ba5951e5a5f", "/system/lib/libnfc_jni.so", "9d0f673bc84538132f34cf8656666f3e50b60f94", "/system/lib/libstagefright_omx.so", "3097d60aa4cf6a40b1eb3d8a693d1d8c4b4fa3f9", "/system/lib/libmedia_jni.so", "21e0a160fd6191ee4d98ff3be9e7454246c29a46", "/system/lib/libOpenMAXAL.so", "8238cd72ee01f7b01bba6f130f262522fa5e71f0", "/system/lib/libs3cjpeg.so", "46c82df0e9303c06b4a9dcd66b7a5c12f6a3ca64", "/system/lib/libharfbuzz.so", "cdbfe37b6da8a55894f6bcae089f455d1c97ddd6", "/system/lib/libeffects.so", "829c7cf6d4f1cdcd1b2c4a6e6514e84b262a2142", "/system/lib/libGLESv2_dbg.so", "a168c34a037b3396d7983351600be27bc42125fd", "/system/lib/libiprouteutil.so", "0f9267fc3250c818608ad44cf8c7b95c2db9dbc2", "/system/lib/libspeexresampler.so", "0cd9fbce840a4995cdccfdb256b69b264b51a3e1", "/system/lib/libstagefright_yuv.so", "6afb1f7a624b1202d84e2313c410521dcdd20478", "/system/lib/libdvm.so", "2f5fde32cc59a353333719836ab819c09f663051", "/system/lib/libstdc++.so", "38a25a434ea6813812dcf0424f117cfc8b130365", "/system/lib/libril.so", "bd3c032ec59ab0e8e33000548bc6d13f71c0bf6e", "/system/lib/libnativehelper.so", "ff93692cc6de97f026411a8d872241ddc24f654c", "/system/lib/libskia.so", "1d9c128a6e9743f88b4d812d02d873b6a946312f", "/system/lib/libandroid_servers.so", "c342ee4d7a0c02f640b79b120eb8c96956c89b2c", "/system/lib/libjni_latinime.so", "736180c6166d27680097dbcb4c12a0e2ce0dc457", "/system/lib/libhardware.so", "045a7ebeee4739e011ff192951c937f427a7c722", "/system/lib/drm/libfwdlockengine.so", "20bde5f8ea49f1e647eaf14483d9cbde3b93f1fc", "/system/lib/libsensorservice.so", "9dd9428f19293767538bdb023925643d3417d1b4", "/system/lib/libpagemap.so", "1c1cad7cb2ad375ddafaa3573bb0f7334c66b664", "/system/lib/libssl.so", "75af20d056442597f9b552728a844c90e23e6648", "/system/lib/libaudioutils.so", "9b321cfbf5cff686326e91eb142e192235c1158e", "/system/lib/libttspico.so", "78e988a54053c110ca5c9edabdeb45d96f294500", "/system/lib/libchromium_net.so", "2f3a684853bf6f5dc998888dd281b7612714e101", "/system/lib/libext2_e2p.so", "9b2eabe1e86c4dbaf78c8dc066c0c85242c44bcb", "/system/lib/libclcore.bc", "a1e2610fdc0c2ef151248092fa32be807d1b983d", "/system/lib/libvariablespeed.so", "39719a2a432e0c8728bcd70943f6c62da5959e33", "/system/lib/libmediaplayerservice.so", "71ee4e1159ca9a0403ed809572b4eb138e71c14a", "/system/lib/libstagefright_soft_vorbisdec.so", "6e4c12575ea961f4448340f418a4f8970ccd5a14", "/system/lib/libstagefright_soft_aacdec.so", "2a3b778d420e0e0f50d534088a2eb5718af67700", "/system/lib/libnfc.so", "5239d8f5f44fe849eef9ec18e83bde29bde1f6cf", "/system/lib/libgui.so", "9897fb1bc6fee825bcb22d1eb008e311b222e8b8", "/system/lib/libdiskconfig.so", "09520652ce8158f5dcc45d3b194fdaa5687d6b80", "/system/lib/libpowermanager.so", "356f45e0475027b32e65911b8a873bffc3a2af88", "/system/lib/libext2_blkid.so", "b78955dceb672cbce3d9df6d6f12d873ff81bf55", "/system/lib/librs_jni.so", "8b231e532e917bc3f6bae12bdab6a7fd624bf66b", "/system/lib/libWnnJpnDic.so", "a74d62a15788b8667ed1ed8d524b203f0e850419", "/system/lib/libnetlink.so", "be6e8ab3758a8c268bf4dcdddb7976830db8bc12", "/system/lib/libsecril-client.so", "ca76d330b5ec8fc0a507369c31e8f9ce234bc7a2", "/system/lib/libemoji.so", "eefa40c6739ae42eb5e1c06916106640187c8603", "/system/lib/libbinder.so", "9bbd2d18fd7772fc10cfa1e225ba309c74c5d025", "/system/lib/libSR_AudioIn.so", "1120d0bdaf59396fe9afcbc9658a416f9a663087", "/system/lib/libOMX.SEC.M4V.Decoder.so", "84bdb1771d5a22b85269269b6fa7d1ef16f2a522", "/system/lib/libstagefright_foundation.so", "1845e31d42f3009b00a8086e798e667f5763d314", "/system/lib/libsqlite_jni.so", "8b14d9aecdeffc6eec70f86740998813d13a33d3", "/system/lib/libc_malloc_debug_qemu.so", "e9a7f27c7cf9b03161ffa07007b44f53e4e15142", "/system/lib/libdefcontainer_jni.so", "7d7d6afc2f8ee732ced60a36808713cd35e37abb", "/system/lib/libnfc_ndef.so", "401ab8e2e9bdf0fa3172246657145d6bea515449", "/system/lib/libdrm1_jni.so", "051495cd604889582aadd66405e7ea1edd0e7190", "/system/lib/libexif.so", "037a3755cab9257351e01b3c79a4deac461484f9", "/system/lib/libstagefright_soft_amrdec.so", "c0fcecee0bac1f2cf6b2cc702284379d71fecc3f", "/system/lib/libstlport.so", "e2792964525c2f77e8142be60b1d2bdd83c38e95", "/system/lib/libhwui.so", "be0ae023b4d82234a37106dcd23063fdae5f67f9", "/system/lib/libfilterfw.so", "d137d675b7c874a9b05e2c890b8a4048b0c7d705", "/system/lib/libwpa_client.so", "d3bd5168162fb9295d6270967ea50ed63eace036", "/system/lib/libjpeg.so", "20ce5082461011f2e96c6a3b9cc3f7a33cad6f6b", "/system/lib/libdbus.so", "7069c64843d71f0a7b946b642e096c107a52f381", "/system/lib/egl/libGLES_android.so", "7b7ec71545578704d149bd1d923e5be12397a56b", "/system/lib/egl/egl.cfg", "4d50747fefcca7d073d1e8a0b79c06ce5d83cc7d", "/system/lib/libicuuc.so", "86effac60cde2528942117f6b656248ca50f2585", "/system/lib/libctest.so", "084aae61cc1110944718096758b3c1d237ef7153", "/system/lib/libwilhelm.so", "652f51b9bd896ac7611e1f8c5d9a7bd0e3ae3029", "/system/lib/libmedia.so", "4d00c3decd784d8788412049974ccc947fed0083", "/system/lib/libext4_utils.so", "e26d84392c234d224b35ec2dd25015f6dd8b42a7", "/system/lib/libsonivox.so", "8d40526af5bb3e4e4af7200a8d4b2940ede43214", "/system/lib/libstagefrighthw.so", "651d6959e8d95dfd07f30cc526694b073f5eed4d", "/system/lib/libfilterpack_imageproc.so", "e4a2abdb80614db588bf159220d4faaf76d4d0e7", "/system/lib/libjni_mosaic.so", "912f4deb25df67822b1354cce8680367f27725d0", "/system/lib/libicui18n.so", "20fb9102f66acfb21b334e503fe9af7daec13b7c", "/system/lib/libbtio.so", "f7841f9927e71a3869ff8c9f01429433049faafb", "/system/lib/libFFTEm.so", "49d9fecee823d93dc8cd8895ca34d707a5f4c67c", "/system/lib/liblog.so", "32cb12dec89e00c066a7778af90d0cca22dd9013", "/system/lib/libbcc.so", "470d8f67ba683d7a073cecb97e53a0186b34165b", "/system/lib/libGLESv2.so", "daca7b55f003c8eb032e7d91f7625c1f21737ce4", "/system/lib/libext2_profile.so", "49f1d22777ecdf2942fa595fdce3e1d03be87adf", "/system/lib/libcutils.so", "fcd5ed104aff8d175e8f53f0f3c392301d03acdd", "/system/lib/libcamera_client.so", "6330691ce495ae08ffa0c60bc803524a56b3c59e", "/system/lib/libvideoeditorplayer.so", "ca92ceb6c048652a95eb7de44784790959453b16", "/system/lib/libvideoeditor_jni.so", "ed6a94141498e31b4ff597d3360e70fa00bf0dc2", "/system/lib/libWnnEngDic.so", "8477a2460311f78f59c206374d6b75e5ce0555eb", "/system/lib/libhardware_legacy.so", "1f48459937dc445ae8e18f8fab1ee7a298e69cbc", "/system/lib/librtp_jni.so", "10bd856c783cfc9b35d9c4b91e6b53ffede6270a", "/system/lib/libext2_uuid.so", "52eac2d4f3c438697a44cdcf720fb60386b8e3de", "/system/lib/libwebrtc_audio_preprocessing.so", "9fb949eaa40b90b9c02f68c0912719d56ebe3537", "/system/lib/libext2fs.so", "0654b4d9e1601a5e8d021a38f7eab6cb7e30238f", "/system/lib/libsurfaceflinger_client.so", "12ba180d276b44d96e23f91c3d328f6ffdeed0eb", "/system/lib/libc.so", "c814f08a7dbfb08bb3ee36f4c7b40891b528c43b", "/system/lib/libutils.so", "a95487ba392987a9450410e4002f970e6d875ad6", "/system/lib/libbcinfo.so", "e33479ee4ca23e5f35ed949943ebc2fbeecb7565", "/system/lib/libstagefright_soft_mpeg4dec.so", "2a24cbcc6a621bad281b8a2582285060ba522e78", "/system/lib/libpixelflinger.so", "fbc277c1ac4cfbed303ff62bab0a1787639149a6", "/system/lib/libc_malloc_debug_leak.so", "a91aa80f30f81de09906d13c633817be273a7189", "/system/lib/libwebcore.so", "f409cea433c60638e74c62e34e4eb657511699e6", "/system/lib/libOMX.SEC.AVC.Encoder.so", "13d8b8a6fb4d262df44349765fa91bab55bfd49f", "/system/lib/libaudioflinger.so", "9282fc1ecbe4bc61ac25e041e61ff206dfa57e73", "/system/lib/libandroid_runtime.so", "f7f4169cbdbb78917804911b7ef91886d0aca942", "/system/lib/libstagefright_soft_vpxdec.so", "cd655252643f6271e3644d46031ca78fdf656517", "/system/lib/libdrmframework.so", "3ef2ead43d8fce3608f38cbc9fd8ed53ec47c09a", "/system/lib/libstagefright_soft_h264dec.so", "5192bab20729c362c4c43cf6f5cf53c1a87d8858", "/system/lib/libsysutils.so", "3989565a9a06753db81751229a73d1be95e7292e", "/system/lib/libinput.so", "86b0ed1ce529a47feb3ad3ae50401430a2958c88", "/system/lib/libbluetoothd.so", "343c8f814386edee6ea887e88ae14f47bf1b6ba4", "/system/lib/libsurfaceflinger.so", "c0b6cbf8330cbd0f09f50e65065281ef6a5d8616");
set_perm_recursive(0, 0, 0755, 0644, "/system");
set_perm_recursive(0, 2000, 0755, 0755, "/system/bin");
set_perm(0, 0, 6755, "/system/bin/su");
set_perm(0, 3003, 02750, "/system/bin/netcfg");
set_perm(0, 3004, 02755, "/system/bin/ping");
set_perm(0, 2000, 06750, "/system/bin/run-as");
set_perm_recursive(1002, 1002, 0755, 0440, "/system/etc/bluetooth");
set_perm(0, 0, 0755, "/system/etc/bluetooth");
set_perm(1000, 1000, 0640, "/system/etc/bluetooth/auto_pairing.conf");
set_perm(3002, 3002, 0444, "/system/etc/bluetooth/blacklist.conf");
set_perm(1002, 1002, 0440, "/system/etc/dbus.conf");
set_perm(1014, 2000, 0550, "/system/etc/dhcpcd/dhcpcd-run-hooks");
set_perm(0, 2000, 0550, "/system/etc/init.goldfish.sh");
set_perm_recursive(0, 0, 0755, 0555, "/system/etc/ppp");
set_perm(0, 2000, 0755, "/system/vendor");
set_perm_recursive(0, 2000, 0755, 0755, "/system/vendor/bin");
set_perm_recursive(0, 2000, 0755, 0644, "/system/vendor/etc");
set_perm_recursive(0, 2000, 0755, 0750, "/system/etc/init.d");
set_perm(0, 0, 0755, "/system/etc/init.d");
set_perm(0, 0, 0644, "/system/vendor/etc/gps.xml");
set_perm(0, 2000, 0755, "/system/vendor/firmware");
set_perm(0, 2000, 0755, "/system/vendor/lib");
set_perm(0, 2000, 0755, "/system/vendor/lib/egl");
set_perm(0, 2000, 0755, "/system/vendor/lib/hw");
set_perm_recursive(0, 2000, 0755, 0755, "/system/xbin");
set_perm(0, 0, 06755, "/system/xbin/librank");
set_perm(0, 0, 06755, "/system/xbin/procmem");
set_perm(0, 0, 06755, "/system/xbin/procrank");
symlink("/system/bin/su", "/system/xbin/su");
show_progress(0.200000, 0);
show_progress(0.200000, 10);
write_raw_image(package_extract_file("boot.img"), "boot");
show_progress(0.100000, 0);
unmount("/system");
